const MONTHS=[{name:"January"},{name:"February"},{name:"March"},{name:"April"},{name:"May"},{name:"June"},{name:"July"},{name:"August"},{name:"September"},{name:"October"},{name:"November"},{name:"December"}];$("#register-button").click(function(){let e=$("#register-input");e.val()&&($.ajax({type:"GET",url:"../../Navegador-Noticias-OAW/src/register_website.php",data:{url:e.val()}}).fail((e,t,n)=>console.log(n)),e.val(""))}),$("#matchBtn").click(function(){let e=$("#matchInput");e.val()&&($.ajax({type:"GET",url:"../../Navegador-Noticias-OAW/src/search.php",data:{word:$("#matchInput").val()}}).done(sortAndShow).fail((e,t,n)=>console.log(n)),e.val(""))});const sortAndShow=e=>{console.log(e);const t=JSON.parse(e);let n=new Array;t.forEach(e=>{const t=JSON.parse(e);n.push(t)}),sortByDate(n)};function setInformation(e,t,n){t.empty(),e.forEach(e=>{let a=dateToCompare(n,e.last_modified),o=document.createElement("div");o.setAttribute("class","list-group-item");let i=document.createElement("a");i.innerHTML=e.title+" Date: "+e.last_modified,i.setAttribute("href",e.url),o.appendChild(i);let r=document.createElement("div"),l=document.createElement("p");l.setAttribute("class","text-justify"),l.innerHTML=e.description;let c=document.createElement("p");if(c.setAttribute("class","text-justify"),c.textContent="["+e.keywords+"]",r.appendChild(l),r.appendChild(c),o.appendChild(r),checkIfExists(a)){$("div#"+a).append(o)}else{createNewList(a,t),$("div#"+a).append(o)}})}function createNewList(e,t){let n=document.createElement("a");n.setAttribute("href","#"+e),n.setAttribute("data-toggle","collapse"),n.setAttribute("class","list-group-item");let a=document.createElement("i");a.setAttribute("class","glyphicon glyphicon-chevron-right"),n.append(a),n.append(e),t.append(n);let o=document.createElement("div");o.setAttribute("class","list-group collapse"),o.setAttribute("id",e),t.append(o)}function sortByDate(e){let t=e.slice().sort(function(e,t){return new Date(e.last_modified)-new Date(t.last_modified)});setInformation(t,$("div#order-year"),"Year"),setInformation(t,$("div#order-month"),"Month"),setInformation(t,$("div#order-day"),"Day")}function checkIfExists(e){return!!$("div#"+e).length}function dateToCompare(e,t){let n=new Date(t);return"Year"===e?n.getUTCFullYear():"Month"===e?MONTHS[n.getUTCMonth()].name:"Day"===e?n.getUTCDate():void 0}$(function(){$(".list-group-item").on("click",function(){$(".glyphicon",this).toggleClass("glyphicon-chevron-right").toggleClass("glyphicon-chevron-down")})}),$(function(){$(".list-group-item").on("click",function(){$(".glyphicon",this).toggleClass("glyphicon-chevron-right").toggleClass("glyphicon-chevron-down")})});